{"visual":{"name":"htmlTextBox","displayName":"HTML Text Box","guid":"PBI_CV_44C21355_D41A_4E75_8D06_4AF48BFF293D_DEBUG","visualClassName":"Visual","version":"1.0.0","description":"A simple PbViz used to display long text formatted with HTML","supportUrl":"http://community.powerbi.com","gitHubUrl":"https://github.com/mjbellomo/pbvizHtmlVisual"},"apiVersion":"1.4.0","author":{"name":"Mike Bellomo","email":"michael.bellomo@npdc.govt.nz"},"assets":{"icon":"assets/icon.png"},"externalJS":[],"style":"style/visual.less","capabilities":{"dataRoles":[{"displayName":"HTML String","name":"category","kind":"Grouping"}],"dataViewMappings":[{"categorical":{"categories":{"for":{"in":"category"},"dataReductionAlgorithm":{"top":{}}},"values":{"select":[{"bind":{"to":"measure"}}]}}}]},"content":{"js":"/*\r\n *  Power BI Visual CLI\r\n *\r\n *  Copyright (c) Microsoft Corporation\r\n *  All rights reserved.\r\n *  MIT License\r\n *\r\n *  Permission is hereby granted, free of charge, to any person obtaining a copy\r\n *  of this software and associated documentation files (the \"\"Software\"\"), to deal\r\n *  in the Software without restriction, including without limitation the rights\r\n *  to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\r\n *  copies of the Software, and to permit persons to whom the Software is\r\n *  furnished to do so, subject to the following conditions:\r\n *\r\n *  The above copyright notice and this permission notice shall be included in\r\n *  all copies or substantial portions of the Software.\r\n *\r\n *  THE SOFTWARE IS PROVIDED *AS IS*, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\r\n *  IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\r\n *  FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\r\n *  AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\r\n *  LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\r\n *  OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\r\n *  THE SOFTWARE.\r\n */\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var extensibility;\r\n    (function (extensibility) {\r\n        var visual;\r\n        (function (visual) {\r\n            var PBI_CV_44C21355_D41A_4E75_8D06_4AF48BFF293D;\r\n            (function (PBI_CV_44C21355_D41A_4E75_8D06_4AF48BFF293D) {\r\n                var Visual = (function () {\r\n                    function Visual(options) {\r\n                        options.element.style.overflow = 'auto';\r\n                        console.log('Visual constructor', options);\r\n                        this.target = options.element;\r\n                        this.updateCount = 0;\r\n                    }\r\n                    Visual.prototype.update = function (options) {\r\n                        var dataViews = options.dataViews;\r\n                        //if there is no dataview return\r\n                        if (!dataViews || dataViews.length === 0)\r\n                            return;\r\n                        var dataView = dataViews[0];\r\n                        if (!dataView || !dataView.metadata)\r\n                            return;\r\n                        //for debugging\r\n                        console.log('Visual update', options);\r\n                        //parse the HTML input string and recreate using style attr passed inline\r\n                        var parser = new DOMParser();\r\n                        //let htmlIn = parser.parseFromString(dataView.table.rows.toString(), \"text/html\");\r\n                        var htmlIn = parser.parseFromString(\"<h3 style='in'>test, after this is a script</h3><br /><script>alert('haxxord');</script>\", \"text/html\");\r\n                        var all = htmlIn.getElementsByTagName(\"*\");\r\n                        for (var i = 0, max = all.length; i < max; i++) {\r\n                            var x = document.createElement(all[i].tagName);\r\n                            this.target.appendChild(x);\r\n                            if (all[i].getAttribute(\"style\")) {\r\n                                x.setAttribute(\"style\", all[i].getAttribute(\"style\"));\r\n                                x.textContent = all[i].textContent;\r\n                            }\r\n                            else {\r\n                                x.setAttribute(\"style\", window.getComputedStyle(all[i], null).cssText);\r\n                                x.textContent = all[i].textContent;\r\n                            }\r\n                        }\r\n                    };\r\n                    return Visual;\r\n                }());\r\n                PBI_CV_44C21355_D41A_4E75_8D06_4AF48BFF293D.Visual = Visual;\r\n            })(PBI_CV_44C21355_D41A_4E75_8D06_4AF48BFF293D = visual.PBI_CV_44C21355_D41A_4E75_8D06_4AF48BFF293D || (visual.PBI_CV_44C21355_D41A_4E75_8D06_4AF48BFF293D = {}));\r\n        })(visual = extensibility.visual || (extensibility.visual = {}));\r\n    })(extensibility = powerbi.extensibility || (powerbi.extensibility = {}));\r\n})(powerbi || (powerbi = {}));\r\nvar powerbi;\r\n(function (powerbi) {\r\n    var visuals;\r\n    (function (visuals) {\r\n        var plugins;\r\n        (function (plugins) {\r\n            plugins.PBI_CV_44C21355_D41A_4E75_8D06_4AF48BFF293D_DEBUG = {\r\n                name: 'PBI_CV_44C21355_D41A_4E75_8D06_4AF48BFF293D_DEBUG',\r\n                displayName: 'HTML Text Box',\r\n                class: 'Visual',\r\n                version: '1.0.0',\r\n                apiVersion: '1.4.0',\r\n                create: function (options) { return new powerbi.extensibility.visual.PBI_CV_44C21355_D41A_4E75_8D06_4AF48BFF293D.Visual(options); },\r\n                custom: true\r\n            };\r\n        })(plugins = visuals.plugins || (visuals.plugins = {}));\r\n    })(visuals = powerbi.visuals || (powerbi.visuals = {}));\r\n})(powerbi || (powerbi = {}));\r\n//# sourceMappingURL=visual.js.map","css":".visual-PBI_CV_44C21355_D41A_4E75_8D06_4AF48BFF293D_DEBUG p {\n  font-size: 20px;\n  font-weight: bold;\n}\n.visual-PBI_CV_44C21355_D41A_4E75_8D06_4AF48BFF293D_DEBUG p em {\n  background: yellow;\n  padding: 5px;\n}\n","iconBase64":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH4QEfAQUsarv+bwAAANhJREFUOMvt1D1KREEQBOBvf/xlMTDSRGQjjbyA9zA1MRUmETNjQexIjDyC19AjeAYDY30qi0kLj5Xd91x2E7GSrumumikYZpgzOhARa8nfSimjNsaI6GMFH6WU9+9+v6b5bJsiIjoYocr6U5Aiv9x0cVj4AW1x0CToNszXa3wVx+hheZKhN6G/j7Osj9k7Sv6Mq0z7hNdpiTZwj1MMxma3Y+sdXONyWsIKLzjEbiaoMMQ2HlI3xEnyu/Q0Yi+TwgW2kg9wjs1Zb7aLm3m/9yX/+EOY5W+s4wtuUy0PT9daAAAAAABJRU5ErkJggg=="}}